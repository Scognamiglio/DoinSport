<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}DoinSport{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="{{ asset('css/default.css') }}">
        <link rel="stylesheet" href="{{ asset('css/book.css') }}">

    </head>
    <body>
        {% block header %}
            {% include '@Default/bandeau.html.twig' %}
        {% endblock %}

        {% block body %}
            <form id="booking" class="bodyCenter">
                {% include '@Default/fieldInput.html.twig' with {'nom' : "nom"} %}
                {% include '@Default/fieldInput.html.twig' with {'nom' : "prenom"} %}
                {% include '@Default/fieldInput.html.twig' with {'nom' : "mail",'type' : 'mail'} %}
                {% include '@Default/fieldInput.html.twig' with {'nom' : "phone"} %}

                {% include '@Default/fieldSelect.html.twig' with {'nom' : "sport", 'options' : optionsActivity} %}
                <br/>
                {% include '@Default/fieldInput.html.twig' with {'nom' : "time",'type' : 'number'} %}
                {% include '@Default/fieldInput.html.twig' with {'nom' : "nbr",'type' : 'number'} %}
                <!-- Dans un projet plus concret, mettre un datePicker peut-être mieux. Aussi utilisé les données déjà connus pour savoir si un créneau est disponible pour rendre le datePicker plus cohérent -->
                {% include '@Default/fieldInput.html.twig' with {'nom' : "date",'type' : 'date'} %}

                <button type="button" class="btn btn-outline-primary">{{ 'Book.save' | trans }}</button>
            </form>
        {% endblock %}


        <!-- Ont aurait pu tous gérer à partir de form de symfony, mais l'objectif étant de faire du twig j'ai préfère gérer l'intégration à la main. -->
        {% block script %}
        <script>
            const form = document.getElementById('booking');

            form.addEventListener('submit', function(event) {
                event.preventDefault();

                const formData = new FormData(form);
                console.log("go")

                fetch('/postBook', {
                    method: 'POST',
                    body: formData
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                    })
                    .catch(error => console.error(error));
            });
        </script>
        {% endblock %}

        {% block footer %}
            {% include '@Default/footer.html.twig' %}
        {% endblock %}
    </body>
</html>
